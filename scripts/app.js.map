{"version":3,"sources":["webpack:///app.js","webpack:///webpack/bootstrap 39da762972ce1737ed82","webpack:///./app/scripts/app.ts","webpack:///./app/scripts/game/Platformer.ts","webpack:///./app/scripts/game/utils/checkForCollision.ts","webpack:///./app/scripts/game/utils/getObstacleArr.ts","webpack:///./app/scripts/game/Obstacle.ts","webpack:///./app/scripts/utils/canvas/Rect.ts","webpack:///./app/scripts/game/utils/getAntagonistArr.ts","webpack:///./app/scripts/game/Antagonist.ts","webpack:///./app/scripts/game/Character.ts","webpack:///./app/scripts/utils/constants.ts","webpack:///./app/scripts/utils/canvas/Sprite.ts","webpack:///./app/scripts/game/utils/constants.ts","webpack:///./app/scripts/game/Bullet.ts","webpack:///./app/scripts/game/Stage.ts"],"names":["modules","__webpack_require__","moduleId","installedModules","exports","module","id","loaded","call","m","c","p","__WEBPACK_AMD_DEFINE_ARRAY__","__WEBPACK_AMD_DEFINE_RESULT__","require","Platformer_1","canvas","document","getElementById","Platformer","elem","ctx","getContext","width","height","apply","undefined","checkForCollision_1","getObstacleArr_1","getAntagonistArr_1","Stage_1","Character_1","this","stage","Stage","outerWidth","outerHeight","innerWidth","innerHeight","xTranslateStart","xTranslateEnd","protagonist","Character","x","y","isJumpKeyPressed","isShootKeyPressed","_endLoop","_endLoopCount","obstacleArr","getObstacleArr","antagonistArr","getAntagonistArr","bind","update","prototype","_this","addEventListener","e","onkeydown","onkeyup","keyCode","move","jump","shoot","stopMove","_a","clearRect","bulletArr","forEach","bullet","i","cleanBulletArr","checkForShotCharacter","checkForBulletCollision","antagonist","obstacle","isInvisible","protagonistCollision","checkForCollision","collisionHandler","side","depth","canKill","kill","antagonistCollison","isDeath","mortalCollision","render","clearWait","location","reload","requestAnimationFrame","index","remove","splice","characterArr","character","targetArr","handler","target","collision","rectA","rectB","deep","xDist","yDist","xHalfs","yHalfs","Math","abs","xDepth","yDepth","Obstacle_1","getBlock","block","Obstacle","getInvisibleBlock","getLava","fillStyle","rightLimit","push","leftLimit","p1Floor","p1FloorRightLimit","p1ProtagonistGuard","p1Lava","p1StepsCount","p1Step","p2LeftLimit","p2Floor","p2RightLimit","p2FloatBlock","p2FloatBlockLeftLimit","p2FloatBlockRightLimit","p3Floor","p3StepLeft","p3StepRight","p4LeftLimit","p4Floor","p4FloorRightLimit","p4Lava","p4Step","p5StepCount","p5StepHeight","p5Step","__extends","d","b","__","constructor","hasOwnProperty","Object","create","Rect_1","_super","context","fill","Rect","beginPath","rect","Antagonist_1","antagonitsArr","p1Antagonist","Antagonist","lastMove","canMove","p2AntagonistA","p2AntagonistB","p2AntagonistC","canShoot","p4AntagonistC","canJump","shootWait","jumpWait","_canMove","_shootWaitCount","_jumpWaitCount","ySpeed","xSpeed","spriteFrames","defaultRight","defaultLeft","deathRight","deathLeft","defineProperty","get","set","val","enumerable","configurable","_isJumping","_isDeath","constants_1","Sprite_1","constants_2","Bullet_1","friction","_xVel","_yVel","_isMovingLeft","_isMovingRight","_clearWaitCount","_bulletArr","spriteId","IS_HIDPI","sprite","Sprite","img","action","sharp","Bullet","GRAVITY","renderFace","yPosition","xPosition","xOrigin","yOrigin","window","devicePixelRatio","sX","sY","sWidth","sHeight","drawImage","_firstUpdate","_x","setTransform","translate"],"mappings":"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","file":"app.js","sourcesContent":["/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(1)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, Platformer_1) {\n\t    \"use strict\";\n\t    var canvas = document.getElementById('js-stage');\n\t    // Init game\n\t    new Platformer_1.Platformer({\n\t        elem: canvas,\n\t        ctx: canvas.getContext('2d'),\n\t        width: 512,\n\t        height: 288\n\t    });\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ },\n/* 1 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(2), __webpack_require__(3), __webpack_require__(6), __webpack_require__(13), __webpack_require__(8)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, checkForCollision_1, getObstacleArr_1, getAntagonistArr_1, Stage_1, Character_1) {\n\t    \"use strict\";\n\t    var Platformer = (function () {\n\t        function Platformer(canvas) {\n\t            this.canvas = canvas;\n\t            canvas.elem.width = canvas.width;\n\t            canvas.elem.height = canvas.height;\n\t            this.stage = new Stage_1.Stage(canvas.ctx);\n\t            this.stage.outerWidth = canvas.width;\n\t            this.stage.outerHeight = canvas.height;\n\t            this.stage.innerWidth = canvas.width * 4;\n\t            this.stage.innerHeight = canvas.height;\n\t            this.stage.xTranslateStart = canvas.width / 2;\n\t            this.stage.xTranslateEnd = this.stage.innerWidth - (canvas.width / 2);\n\t            this.protagonist = new Character_1.Character(canvas.ctx);\n\t            this.protagonist.x = 16;\n\t            this.protagonist.y = (this.stage.innerHeight / 2) - this.protagonist.height;\n\t            this.isJumpKeyPressed = false;\n\t            this.isShootKeyPressed = false;\n\t            this._endLoop = false;\n\t            this._endLoopCount = 0;\n\t            this.obstacleArr = getObstacleArr_1.getObstacleArr(canvas.ctx, this.stage.innerWidth, this.stage.innerHeight);\n\t            this.antagonistArr = getAntagonistArr_1.getAntagonistArr(canvas.ctx, this.stage.innerWidth, this.stage.innerHeight);\n\t            this\n\t                .bind()\n\t                .update();\n\t        }\n\t        Platformer.prototype.bind = function () {\n\t            var _this = this;\n\t            document.addEventListener('keydown', function (e) {\n\t                _this.onkeydown(e);\n\t            }, false);\n\t            document.addEventListener('keyup', function (e) {\n\t                _this.onkeyup(e);\n\t            }, false);\n\t            return this;\n\t        };\n\t        Platformer.prototype.onkeydown = function (e) {\n\t            var protagonist = this.protagonist;\n\t            var keyCode = e.keyCode;\n\t            if (keyCode === 39) {\n\t                protagonist.move('right');\n\t            }\n\t            if (keyCode === 37) {\n\t                protagonist.move('left');\n\t            }\n\t            if (keyCode === 38 || keyCode === 32) {\n\t                // Prevent continuous jumping\n\t                if (!this.isJumpKeyPressed) {\n\t                    protagonist.jump();\n\t                    this.isJumpKeyPressed = true;\n\t                }\n\t            }\n\t            if (keyCode === 90) {\n\t                // Prevent continuous shooting\n\t                if (!this.isShootKeyPressed) {\n\t                    protagonist.shoot();\n\t                    this.isShootKeyPressed = true;\n\t                }\n\t            }\n\t        };\n\t        Platformer.prototype.onkeyup = function (e) {\n\t            var protagonist = this.protagonist;\n\t            var keyCode = e.keyCode;\n\t            if (keyCode === 39) {\n\t                protagonist.stopMove('right');\n\t            }\n\t            if (keyCode === 37) {\n\t                protagonist.stopMove('left');\n\t            }\n\t            if (keyCode === 38 || keyCode === 32) {\n\t                this.isJumpKeyPressed = false;\n\t            }\n\t            if (keyCode === 90) {\n\t                this.isShootKeyPressed = false;\n\t            }\n\t        };\n\t        /** Draws protagonist, antagonists and obstacles */\n\t        Platformer.prototype.update = function () {\n\t            var _this = this;\n\t            var _a = this, canvas = _a.canvas, stage = _a.stage, protagonist = _a.protagonist, antagonistArr = _a.antagonistArr, obstacleArr = _a.obstacleArr;\n\t            // Clear stage visible area\n\t            canvas.ctx.clearRect(-stage.x, stage.y, stage.outerWidth, stage.outerHeight);\n\t            // Update protagonist and its bullets\n\t            protagonist.update();\n\t            protagonist.bulletArr.forEach(function (bullet) { bullet.update(); });\n\t            protagonist.bulletArr.forEach(function (bullet, i) {\n\t                _this\n\t                    .cleanBulletArr(protagonist.bulletArr, i, bullet)\n\t                    .checkForShotCharacter(bullet, antagonistArr)\n\t                    .checkForBulletCollision(bullet, obstacleArr);\n\t            });\n\t            // Update antagonist and its bullets\n\t            antagonistArr.forEach(function (antagonist) {\n\t                antagonist.update();\n\t                antagonist.bulletArr.forEach(function (bullet) { bullet.update(); });\n\t                antagonist.bulletArr.forEach(function (bullet, i) {\n\t                    _this\n\t                        .cleanBulletArr(antagonist.bulletArr, i, bullet)\n\t                        .checkForShotCharacter(bullet, [protagonist])\n\t                        .checkForBulletCollision(bullet, obstacleArr);\n\t                });\n\t            });\n\t            // Check if characters has collide with obstacles or if character had\n\t            // collide with each other\n\t            obstacleArr.forEach(function (obstacle) {\n\t                // Invisible obstacles don't affect protagonist\n\t                if (!obstacle.isInvisible) {\n\t                    var protagonistCollision = checkForCollision_1.checkForCollision(protagonist, obstacle, true);\n\t                    if (typeof protagonistCollision === 'object') {\n\t                        protagonist.collisionHandler(protagonistCollision.side, protagonistCollision.depth);\n\t                        if (obstacle.canKill) {\n\t                            protagonist.kill();\n\t                        }\n\t                    }\n\t                }\n\t                antagonistArr.forEach(function (antagonist) {\n\t                    var antagonistCollison = checkForCollision_1.checkForCollision(antagonist, obstacle, true);\n\t                    if (typeof antagonistCollison === 'object') {\n\t                        antagonist.collisionHandler(antagonistCollison.side, antagonistCollison.depth);\n\t                    }\n\t                    if (!antagonist.isDeath) {\n\t                        var mortalCollision = checkForCollision_1.checkForCollision(protagonist, antagonist);\n\t                        if (mortalCollision) {\n\t                            protagonist.kill();\n\t                            antagonist.kill();\n\t                        }\n\t                    }\n\t                });\n\t                obstacle.render();\n\t            });\n\t            // Render antagonist and its bullets\n\t            antagonistArr.forEach(function (antagonist) {\n\t                antagonist.bulletArr.forEach(function (bullet) { bullet.render(); });\n\t                antagonist.render();\n\t            });\n\t            // Render protagonist and its bullets\n\t            protagonist.bulletArr.forEach(function (bullet) { bullet.render(); });\n\t            protagonist.render();\n\t            // Move stage along with protagonist\n\t            stage.x = protagonist.x;\n\t            stage.render();\n\t            // End game validation\n\t            if (this._endLoop) {\n\t                if (this._endLoopCount === protagonist.clearWait - 2) {\n\t                    // Reload website\n\t                    location.reload();\n\t                    // Avoid rendering\n\t                    return this;\n\t                }\n\t                this._endLoopCount++;\n\t            }\n\t            // Restart game if protagonist is death or very close to the end\n\t            if (protagonist.isDeath || this.protagonist.x > (stage.innerWidth - protagonist.width - 10)) {\n\t                this._endLoop = true;\n\t            }\n\t            // Keep updating if everything is ok\n\t            requestAnimationFrame(this.update.bind(this));\n\t            return this;\n\t        };\n\t        /** Cleans bullets that are out of sight */\n\t        Platformer.prototype.cleanBulletArr = function (bulletArr, index, bullet) {\n\t            var stage = this.stage;\n\t            // Check if is out of sight\n\t            if (bullet.remove || (bullet.x < -stage.x || bullet.x > -stage.x + stage.outerWidth)) {\n\t                // Remove from array\n\t                bulletArr.splice(index, 1);\n\t            }\n\t            return this;\n\t        };\n\t        /** Checks if a bullet has collided with a Character */\n\t        Platformer.prototype.checkForShotCharacter = function (bullet, characterArr) {\n\t            var _this = this;\n\t            characterArr.forEach(function (character) {\n\t                if (!character.isDeath) {\n\t                    _this.checkForBulletCollision(bullet, [character], function (character) {\n\t                        character.kill();\n\t                    });\n\t                }\n\t            });\n\t            return this;\n\t        };\n\t        /** Checks if a bullet has collided with another Rect */\n\t        Platformer.prototype.checkForBulletCollision = function (bullet, targetArr, handler) {\n\t            targetArr.forEach(function (target) {\n\t                var collision = checkForCollision_1.checkForCollision(bullet, target, true);\n\t                // Invisible obstacles don't affect bullets\n\t                if (target['isInvisible'])\n\t                    return;\n\t                if (typeof collision === 'object') {\n\t                    bullet.collisionHandler(collision.side, collision.depth);\n\t                    if (typeof handler === 'function') {\n\t                        handler(target);\n\t                    }\n\t                }\n\t            });\n\t            return this;\n\t        };\n\t        return Platformer;\n\t    }());\n\t    exports.Platformer = Platformer;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ },\n/* 2 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports) {\n\t    \"use strict\";\n\t    /**\n\t     * Checks for collision between rects\n\t     * @see { @link http://bit.ly/2iR5hvL }\n\t     * @see { @link http://bit.ly/2ijiL26 }\n\t     * @see { @link https://mzl.la/2iyMrWV }\n\t     */\n\t    function checkForCollision(rectA, rectB, deep) {\n\t        if (deep === void 0) { deep = false; }\n\t        // Distance between centers in x and y axis\n\t        var xDist = (rectA.x + rectA.width / 2) - (rectB.x + rectB.width / 2);\n\t        var yDist = (rectA.y + rectA.height / 2) - (rectB.y + rectB.height / 2);\n\t        // Width and height halfs sum of each rect (is the distance between centers\n\t        // if the rects were side by side and aligned vertically or horizontally).\n\t        var xHalfs = (rectA.width + rectB.width) / 2;\n\t        var yHalfs = (rectA.height + rectB.height) / 2;\n\t        // If the distance between centers is less than the halfs in each axis then\n\t        // rects are colliding.\n\t        if (Math.abs(xDist) < xHalfs && Math.abs(yDist) < yHalfs) {\n\t            if (deep) {\n\t                var xDepth = xHalfs - Math.abs(xDist);\n\t                var yDepth = yHalfs - Math.abs(yDist);\n\t                if (xDepth >= yDepth) {\n\t                    return {\n\t                        side: yDist > 0 ? 'top' : 'bottom',\n\t                        depth: yDepth\n\t                    };\n\t                }\n\t                else {\n\t                    return {\n\t                        side: xDist > 0 ? 'left' : 'right',\n\t                        depth: xDepth\n\t                    };\n\t                }\n\t            }\n\t            else {\n\t                return true;\n\t            }\n\t        }\n\t        return false;\n\t    }\n\t    exports.checkForCollision = checkForCollision;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ },\n/* 3 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(4)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, Obstacle_1) {\n\t    \"use strict\";\n\t    function getBlock(ctx, width, height) {\n\t        if (width === void 0) { width = 1; }\n\t        if (height === void 0) { height = 1; }\n\t        var block = new Obstacle_1.Obstacle(ctx);\n\t        block.width = 32 * width;\n\t        block.height = 32 * height;\n\t        return block;\n\t    }\n\t    function getInvisibleBlock(ctx, width, height) {\n\t        if (width === void 0) { width = 1; }\n\t        if (height === void 0) { height = 1; }\n\t        var block = getBlock(ctx, width, height);\n\t        block.isInvisible = true;\n\t        return block;\n\t    }\n\t    function getLava(ctx, width, height) {\n\t        if (width === void 0) { width = 1; }\n\t        if (height === void 0) { height = 1; }\n\t        var block = new Obstacle_1.Obstacle(ctx);\n\t        block.canKill = true;\n\t        block.width = 32 * width;\n\t        block.height = 16 * height;\n\t        block.fillStyle = '#ff4a4a';\n\t        return block;\n\t    }\n\t    function getObstacleArr(ctx, width, height) {\n\t        var obstacleArr = [];\n\t        // LIMITS\n\t        ////////////////////////////////////////////////////////////////////////////\n\t        var rightLimit = new Obstacle_1.Obstacle(ctx);\n\t        rightLimit.width = 20;\n\t        rightLimit.height = height;\n\t        rightLimit.x = width;\n\t        rightLimit.y = 0;\n\t        obstacleArr.push(rightLimit);\n\t        var leftLimit = new Obstacle_1.Obstacle(ctx);\n\t        leftLimit.width = 20;\n\t        leftLimit.height = height;\n\t        leftLimit.x = 0 - 20;\n\t        leftLimit.y = 0;\n\t        obstacleArr.push(leftLimit);\n\t        // PART 1\n\t        ////////////////////////////////////////////////////////////////////////////\n\t        var p1Floor = getBlock(ctx, 7);\n\t        p1Floor.x = 0;\n\t        p1Floor.y = height - p1Floor.height;\n\t        obstacleArr.push(p1Floor);\n\t        var p1FloorRightLimit = getInvisibleBlock(ctx, 1, 1);\n\t        p1FloorRightLimit.x = p1Floor.x + p1Floor.width;\n\t        p1FloorRightLimit.y = p1Floor.y - p1FloorRightLimit.height;\n\t        obstacleArr.push(p1FloorRightLimit);\n\t        var p1ProtagonistGuard = getInvisibleBlock(ctx, 1, 1);\n\t        p1ProtagonistGuard.x = p1ProtagonistGuard.width;\n\t        p1ProtagonistGuard.y = p1FloorRightLimit.y;\n\t        obstacleArr.push(p1ProtagonistGuard);\n\t        var p1Lava = getLava(ctx, 11, 1);\n\t        p1Lava.x = p1Floor.x + p1Floor.width;\n\t        p1Lava.y = height - p1Lava.height;\n\t        obstacleArr.push(p1Lava);\n\t        var p1StepsCount = 0;\n\t        while (p1StepsCount < 5) {\n\t            var p1Step = getBlock(ctx);\n\t            p1Step.y = height;\n\t            p1Step.y -= p1StepsCount % 2 ? p1Step.height * 2 : p1Step.height * 3;\n\t            p1Step.x = (p1Floor.x + p1Floor.width) + p1Step.width;\n\t            p1Step.x += (p1Step.width * 2) * p1StepsCount;\n\t            obstacleArr.push(p1Step);\n\t            ++p1StepsCount;\n\t        }\n\t        // PART 2\n\t        ////////////////////////////////////////////////////////////////////////////\n\t        var p2LeftLimit = getBlock(ctx, 1, 2);\n\t        p2LeftLimit.x = p1Lava.x + p1Lava.width;\n\t        p2LeftLimit.y = height - p2LeftLimit.height;\n\t        obstacleArr.push(p2LeftLimit);\n\t        var p2Floor = getBlock(ctx, 9);\n\t        p2Floor.x = p2LeftLimit.x + p2LeftLimit.width;\n\t        p2Floor.y = height - p2Floor.height;\n\t        obstacleArr.push(p2Floor);\n\t        var p2RightLimit = getBlock(ctx, 1, 3);\n\t        p2RightLimit.x = p2Floor.x + p2Floor.width;\n\t        p2RightLimit.y = height - p2RightLimit.height;\n\t        obstacleArr.push(p2RightLimit);\n\t        var p2FloatBlock = getBlock(ctx, 7);\n\t        p2FloatBlock.x = p2LeftLimit.x + p2LeftLimit.width;\n\t        p2FloatBlock.y = height - (p2FloatBlock.height * 5);\n\t        obstacleArr.push(p2FloatBlock);\n\t        var p2FloatBlockLeftLimit = getInvisibleBlock(ctx, 1);\n\t        p2FloatBlockLeftLimit.x = p2FloatBlock.x - p2FloatBlockLeftLimit.height;\n\t        p2FloatBlockLeftLimit.y = p2FloatBlock.y - p2FloatBlockLeftLimit.width;\n\t        obstacleArr.push(p2FloatBlockLeftLimit);\n\t        var p2FloatBlockRightLimit = getInvisibleBlock(ctx, 1);\n\t        p2FloatBlockRightLimit.x = p2FloatBlock.x + p2FloatBlock.width;\n\t        p2FloatBlockRightLimit.y = p2FloatBlock.y - p2FloatBlockRightLimit.width;\n\t        obstacleArr.push(p2FloatBlockRightLimit);\n\t        // PART 3\n\t        ////////////////////////////////////////////////////////////////////////////\n\t        var p3Floor = getLava(ctx, 8);\n\t        p3Floor.x = p2RightLimit.x + p2RightLimit.width;\n\t        p3Floor.y = height + (p3Floor.height * 2);\n\t        obstacleArr.push(p3Floor);\n\t        var p3StepLeft = getBlock(ctx);\n\t        p3StepLeft.x = p3Floor.x + (p3StepLeft.width * 2);\n\t        p3StepLeft.y = height - (p3StepLeft.height * 2);\n\t        obstacleArr.push(p3StepLeft);\n\t        var p3StepRight = getBlock(ctx);\n\t        p3StepRight.x = p3Floor.x + (p3StepLeft.width * 5);\n\t        p3StepRight.y = p3StepLeft.y;\n\t        obstacleArr.push(p3StepRight);\n\t        // PART 4\n\t        ////////////////////////////////////////////////////////////////////////////\n\t        var p4LeftLimit = getBlock(ctx, 1, 3);\n\t        p4LeftLimit.x = p3Floor.x + p3Floor.width;\n\t        p4LeftLimit.y = height - p4LeftLimit.height;\n\t        obstacleArr.push(p4LeftLimit);\n\t        var p4Floor = getBlock(ctx, 10);\n\t        p4Floor.x = p4LeftLimit.x + p4LeftLimit.width;\n\t        p4Floor.y = height - p4Floor.height;\n\t        obstacleArr.push(p4Floor);\n\t        var p4FloorRightLimit = getInvisibleBlock(ctx, 1, 3);\n\t        p4FloorRightLimit.x = p4Floor.x + p4Floor.width;\n\t        p4FloorRightLimit.y = height - (p4FloorRightLimit.height);\n\t        obstacleArr.push(p4FloorRightLimit);\n\t        var p4Lava = getLava(ctx, 9);\n\t        p4Lava.x = p4FloorRightLimit.x;\n\t        p4Lava.y = height - p4Lava.height;\n\t        obstacleArr.push(p4Lava);\n\t        var p4Step = getBlock(ctx);\n\t        p4Step.x = p4FloorRightLimit.x + (p4Step.width * 4);\n\t        p4Step.y = height - p4Step.height;\n\t        obstacleArr.push(p4Step);\n\t        // PART 5\n\t        ////////////////////////////////////////////////////////////////////////////\n\t        var p5StepCount = 0;\n\t        while (p5StepCount < 7) {\n\t            var p5StepHeight = p5StepCount < 5 ? p5StepCount + 1 : 5;\n\t            var p5Step = getBlock(ctx, 1, p5StepHeight);\n\t            p5Step.x = (p4Lava.x + p4Lava.width) + (p5Step.width * p5StepCount);\n\t            p5Step.y = height - p5Step.height;\n\t            obstacleArr.push(p5Step);\n\t            ++p5StepCount;\n\t        }\n\t        return obstacleArr;\n\t    }\n\t    exports.getObstacleArr = getObstacleArr;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ },\n/* 4 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || function (d, b) {\n\t    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n\t    function __() { this.constructor = d; }\n\t    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t};\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, Rect_1) {\n\t    \"use strict\";\n\t    var Obstacle = (function (_super) {\n\t        __extends(Obstacle, _super);\n\t        function Obstacle(context) {\n\t            var _this = _super.call(this, context) || this;\n\t            _this.context = context;\n\t            _this.canKill = false;\n\t            _this.isInvisible = false;\n\t            _this.fillStyle = 'black';\n\t            _this.fillStyle = 'black';\n\t            return _this;\n\t        }\n\t        Obstacle.prototype.render = function () {\n\t            var _a = this, context = _a.context, isInvisible = _a.isInvisible;\n\t            context.fillStyle = isInvisible ? 'transparent' : this.fillStyle;\n\t            _super.prototype.render.call(this);\n\t            context.fill();\n\t            return this;\n\t        };\n\t        return Obstacle;\n\t    }(Rect_1.Rect));\n\t    exports.Obstacle = Obstacle;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ },\n/* 5 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports) {\n\t    \"use strict\";\n\t    var Rect = (function () {\n\t        function Rect(context) {\n\t            this.context = context;\n\t            this.x = 0;\n\t            this.y = 0;\n\t            this.width = 0;\n\t            this.height = 0;\n\t        }\n\t        Rect.prototype.render = function () {\n\t            var context = this.context;\n\t            context.beginPath();\n\t            context.rect(this.x, this.y, this.width, this.height);\n\t            return this;\n\t        };\n\t        return Rect;\n\t    }());\n\t    exports.Rect = Rect;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ },\n/* 6 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(7)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, Antagonist_1) {\n\t    \"use strict\";\n\t    function getAntagonistArr(ctx, width, height) {\n\t        var antagonitsArr = [];\n\t        var p1Antagonist = new Antagonist_1.Antagonist(ctx);\n\t        p1Antagonist.x = 200;\n\t        p1Antagonist.y = 224;\n\t        p1Antagonist.lastMove = 'left';\n\t        p1Antagonist.canMove = true;\n\t        p1Antagonist.fillStyle = '#ff4a4a';\n\t        antagonitsArr.push(p1Antagonist);\n\t        var p2AntagonistA = new Antagonist_1.Antagonist(ctx);\n\t        p2AntagonistA.x = 608;\n\t        p2AntagonistA.y = 96;\n\t        p2AntagonistA.lastMove = 'right';\n\t        p2AntagonistA.canMove = true;\n\t        p2AntagonistA.fillStyle = '#ff4a4a';\n\t        antagonitsArr.push(p2AntagonistA);\n\t        var p2AntagonistB = new Antagonist_1.Antagonist(ctx);\n\t        p2AntagonistB.x = 808;\n\t        p2AntagonistB.y = 96;\n\t        p2AntagonistB.lastMove = 'left';\n\t        p2AntagonistB.canMove = true;\n\t        p2AntagonistB.fillStyle = '#e05353';\n\t        antagonitsArr.push(p2AntagonistB);\n\t        var p2AntagonistC = new Antagonist_1.Antagonist(ctx);\n\t        p2AntagonistC.x = 864;\n\t        p2AntagonistC.y = 224;\n\t        p2AntagonistC.lastMove = 'left';\n\t        p2AntagonistC.canMove = true;\n\t        p2AntagonistC.canShoot = true;\n\t        antagonitsArr.push(p2AntagonistC);\n\t        var p4AntagonistC = new Antagonist_1.Antagonist(ctx);\n\t        p4AntagonistC.x = 1536;\n\t        p4AntagonistC.y = 224;\n\t        p4AntagonistC.lastMove = 'left';\n\t        p4AntagonistC.canMove = true;\n\t        p4AntagonistC.canShoot = true;\n\t        p4AntagonistC.canJump = true;\n\t        p4AntagonistC.fillStyle = '#44c782';\n\t        antagonitsArr.push(p4AntagonistC);\n\t        return antagonitsArr;\n\t    }\n\t    exports.getAntagonistArr = getAntagonistArr;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ },\n/* 7 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || function (d, b) {\n\t    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n\t    function __() { this.constructor = d; }\n\t    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t};\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(8)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, Character_1) {\n\t    \"use strict\";\n\t    var Antagonist = (function (_super) {\n\t        __extends(Antagonist, _super);\n\t        function Antagonist(context) {\n\t            var _this = _super.call(this, context) || this;\n\t            _this.context = context;\n\t            _this.canJump = false;\n\t            _this.canShoot = false;\n\t            _this.shootWait = 50;\n\t            _this.jumpWait = 10;\n\t            _this._canMove = false;\n\t            _this._shootWaitCount = 0;\n\t            _this._jumpWaitCount = 0;\n\t            // Super defaults override\n\t            _this.ySpeed = 6;\n\t            _this.xSpeed = 0.25;\n\t            _this.fillStyle = '#524f56';\n\t            _this.spriteFrames = {\n\t                defaultRight: [28, 0],\n\t                defaultLeft: [28, 16],\n\t                deathRight: [42, 0],\n\t                deathLeft: [42, 16]\n\t            };\n\t            // Defaults\n\t            _this.canJump = false;\n\t            _this.jumpWait = 25;\n\t            _this._jumpWaitCount = 0;\n\t            return _this;\n\t        }\n\t        Object.defineProperty(Antagonist.prototype, \"canMove\", {\n\t            get: function () {\n\t                return this._canMove;\n\t            },\n\t            set: function (val) {\n\t                this.move(this.lastMove);\n\t                this._canMove = true;\n\t            },\n\t            enumerable: true,\n\t            configurable: true\n\t        });\n\t        Antagonist.prototype.update = function () {\n\t            if (!this.isDeath) {\n\t                // Auto jumping\n\t                if (this.canJump && !this._isJumping) {\n\t                    if (this._jumpWaitCount++ === this.jumpWait) {\n\t                        this.jump();\n\t                        this._jumpWaitCount = 0;\n\t                    }\n\t                }\n\t                // Auto shooting\n\t                if (this.canShoot) {\n\t                    if (this._shootWaitCount++ === this.shootWait) {\n\t                        this.shoot();\n\t                        this._shootWaitCount = 0;\n\t                    }\n\t                }\n\t            }\n\t            // Update super\n\t            _super.prototype.update.call(this);\n\t            return this;\n\t        };\n\t        Antagonist.prototype.collisionHandler = function (side, depth) {\n\t            _super.prototype.collisionHandler.call(this, side, depth);\n\t            // Keep moving after side collision\n\t            if (!this._isDeath) {\n\t                if (side === 'right')\n\t                    this.move('left');\n\t                if (side === 'left')\n\t                    this.move('right');\n\t            }\n\t            return this;\n\t        };\n\t        return Antagonist;\n\t    }(Character_1.Character));\n\t    exports.Antagonist = Antagonist;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ },\n/* 8 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || function (d, b) {\n\t    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n\t    function __() { this.constructor = d; }\n\t    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t};\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(9), __webpack_require__(5), __webpack_require__(10), __webpack_require__(11), __webpack_require__(12)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, constants_1, Rect_1, Sprite_1, constants_2, Bullet_1) {\n\t    \"use strict\";\n\t    var Character = (function (_super) {\n\t        __extends(Character, _super);\n\t        function Character(context) {\n\t            var _this = _super.call(this, context) || this;\n\t            _this.context = context;\n\t            _this.friction = 0.75;\n\t            _this.xSpeed = 4;\n\t            _this.ySpeed = 8;\n\t            _this.clearWait = 25;\n\t            _this.lastMove = 'right';\n\t            _this.fillStyle = '#5575ff';\n\t            _this.spriteFrames = {\n\t                defaultRight: [0, 0],\n\t                defaultLeft: [0, 16],\n\t                deathRight: [14, 0],\n\t                deathLeft: [14, 16]\n\t            };\n\t            _this._xVel = 0;\n\t            _this._yVel = 0;\n\t            _this._isDeath = false;\n\t            _this._isJumping = false;\n\t            _this._isMovingLeft = false;\n\t            _this._isMovingRight = false;\n\t            _this._clearWaitCount = 0;\n\t            _this._bulletArr = [];\n\t            _this.width = 24;\n\t            _this.height = 32;\n\t            var spriteId = constants_1.IS_HIDPI ? 'js-sprite-2x' : 'js-sprite-1x';\n\t            _this.sprite = new Sprite_1.Sprite(context);\n\t            _this.sprite.img = document.getElementById(spriteId);\n\t            _this.sprite.width = 14;\n\t            _this.sprite.height = 16;\n\t            return _this;\n\t        }\n\t        Object.defineProperty(Character.prototype, \"xVel\", {\n\t            get: function () { return this._xVel; },\n\t            enumerable: true,\n\t            configurable: true\n\t        });\n\t        Object.defineProperty(Character.prototype, \"yVel\", {\n\t            get: function () { return this._yVel; },\n\t            enumerable: true,\n\t            configurable: true\n\t        });\n\t        Object.defineProperty(Character.prototype, \"isDeath\", {\n\t            get: function () { return this._isDeath; },\n\t            enumerable: true,\n\t            configurable: true\n\t        });\n\t        Object.defineProperty(Character.prototype, \"isJumping\", {\n\t            get: function () { return this._isJumping; },\n\t            enumerable: true,\n\t            configurable: true\n\t        });\n\t        Object.defineProperty(Character.prototype, \"isMovingLeft\", {\n\t            get: function () { return this._isMovingLeft; },\n\t            enumerable: true,\n\t            configurable: true\n\t        });\n\t        Object.defineProperty(Character.prototype, \"isMovingRight\", {\n\t            get: function () { return this._isMovingRight; },\n\t            enumerable: true,\n\t            configurable: true\n\t        });\n\t        Object.defineProperty(Character.prototype, \"bulletArr\", {\n\t            get: function () { return this._bulletArr; },\n\t            enumerable: true,\n\t            configurable: true\n\t        });\n\t        Object.defineProperty(Character.prototype, \"clearWaitCount\", {\n\t            get: function () { return this._clearWaitCount; },\n\t            enumerable: true,\n\t            configurable: true\n\t        });\n\t        Character.prototype.kill = function () {\n\t            // Ends horizontal moving completly\n\t            this.stopMove();\n\t            this._xVel = 0;\n\t            // Ends vertical moving completly\n\t            this._isJumping = false;\n\t            this._yVel = 0;\n\t            this._isDeath = true;\n\t            return this;\n\t        };\n\t        Character.prototype.move = function (action) {\n\t            if (!this._isDeath) {\n\t                this._isMovingLeft = action === 'left';\n\t                this._isMovingRight = action === 'right';\n\t                this.lastMove = action;\n\t            }\n\t            return this;\n\t        };\n\t        Character.prototype.stopMove = function (action, sharp) {\n\t            if (sharp === void 0) { sharp = false; }\n\t            // End horizontal moving smoothly\n\t            this._isMovingRight = !action || action === 'right' ? false : this._isMovingRight;\n\t            this._isMovingLeft = !action || action === 'left' ? false : this._isMovingLeft;\n\t            return this;\n\t        };\n\t        Character.prototype.jump = function () {\n\t            // Abort if already jumping or not grounded (falling down from a cliff)\n\t            if (!this._isJumping && this._yVel === 0) {\n\t                this._isJumping = true;\n\t                this._yVel -= this.ySpeed;\n\t            }\n\t            return this;\n\t        };\n\t        Character.prototype.shoot = function () {\n\t            var _a = this, context = _a.context, x = _a.x, y = _a.y, width = _a.width, height = _a.height;\n\t            var bullet = new Bullet_1.Bullet(context);\n\t            bullet.fillStyle = this.fillStyle;\n\t            bullet.x = (x + width / 2) - (bullet.width / 2);\n\t            bullet.y = (y + height / 2) - (bullet.height / 2);\n\t            bullet.move(this.lastMove);\n\t            this._bulletArr.push(bullet);\n\t            return this;\n\t        };\n\t        Character.prototype.update = function () {\n\t            if (!this._isDeath) {\n\t                // Move right\n\t                if (this._isMovingRight) {\n\t                    if (this._xVel < this.xSpeed) {\n\t                        this._xVel++;\n\t                    }\n\t                }\n\t                else if (this._isMovingLeft) {\n\t                    if (this._xVel > -this.xSpeed) {\n\t                        this._xVel--;\n\t                    }\n\t                }\n\t                else if (this._xVel !== 0) {\n\t                    if (Math.abs(this._xVel) < 0.05) {\n\t                        this._xVel = 0;\n\t                    }\n\t                    else {\n\t                        this._xVel *= this.friction;\n\t                    }\n\t                }\n\t                // Gravity must always push down\n\t                this._yVel += constants_2.GRAVITY;\n\t                // Make speed || friction affect x\n\t                this.x += this._xVel;\n\t                // Make gravity affect y\n\t                this.y += this._yVel;\n\t            }\n\t            return this;\n\t        };\n\t        Character.prototype.collisionHandler = function (side, depth) {\n\t            if (!this._isDeath) {\n\t                switch (side) {\n\t                    case 'left':\n\t                        this.x += depth;\n\t                        break;\n\t                    case 'right':\n\t                        this.x -= depth;\n\t                        break;\n\t                    case 'top':\n\t                        this.y += depth;\n\t                        // Update vertical movement\n\t                        this._yVel = 0;\n\t                        break;\n\t                    case 'bottom':\n\t                        this.y -= depth;\n\t                        break;\n\t                }\n\t                // Stop character horizontal movement\n\t                if (side === 'left' || side === 'right') {\n\t                    this._xVel = 0;\n\t                }\n\t                // Stop vertical movement if character is moving down\n\t                if (side === 'bottom' && this._yVel > 0) {\n\t                    this._yVel = 0;\n\t                    if (this._isJumping) {\n\t                        this._isJumping = false;\n\t                    }\n\t                }\n\t            }\n\t            return this;\n\t        };\n\t        Character.prototype.render = function () {\n\t            var context = this.context;\n\t            if (this._isDeath) {\n\t                if (this._clearWaitCount === this.clearWait) {\n\t                    // Avoid rendering\n\t                    return this;\n\t                }\n\t                this._clearWaitCount++;\n\t            }\n\t            context.fillStyle = this.fillStyle;\n\t            _super.prototype.render.call(this);\n\t            context.fill();\n\t            this.renderFace();\n\t            return this;\n\t        };\n\t        Character.prototype.renderFace = function () {\n\t            var _a = this, sprite = _a.sprite, lastMove = _a.lastMove, spriteFrames = _a.spriteFrames;\n\t            sprite.yPosition = this.y;\n\t            sprite.xPosition = this.x;\n\t            if (lastMove === 'right') {\n\t                sprite.xPosition += this.width - sprite.width;\n\t            }\n\t            if (this.isDeath) {\n\t                if (lastMove === 'right') {\n\t                    sprite.xOrigin = spriteFrames.deathRight[0];\n\t                    sprite.yOrigin = spriteFrames.deathRight[1];\n\t                }\n\t                else {\n\t                    sprite.xOrigin = spriteFrames.deathLeft[0];\n\t                    sprite.yOrigin = spriteFrames.deathLeft[1];\n\t                }\n\t            }\n\t            else {\n\t                if (lastMove === 'right') {\n\t                    sprite.xOrigin = spriteFrames.defaultRight[0];\n\t                    sprite.yOrigin = spriteFrames.defaultRight[1];\n\t                }\n\t                else {\n\t                    sprite.xOrigin = spriteFrames.defaultLeft[0];\n\t                    sprite.yOrigin = spriteFrames.defaultLeft[1];\n\t                }\n\t            }\n\t            sprite.render();\n\t            return this;\n\t        };\n\t        return Character;\n\t    }(Rect_1.Rect));\n\t    exports.Character = Character;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ },\n/* 9 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports) {\n\t    \"use strict\";\n\t    /**\n\t     * Is high resolution device\n\t     * @const\n\t     */\n\t    exports.IS_HIDPI = window.devicePixelRatio > 1;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ },\n/* 10 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(9)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, constants_1) {\n\t    \"use strict\";\n\t    var Sprite = (function () {\n\t        /**\n\t         * Interface that renders and updates a single sprite\n\t         */\n\t        function Sprite(context) {\n\t            this.context = context;\n\t            this.xOrigin = 0;\n\t            this.yOrigin = 0;\n\t            this.xPosition = 0;\n\t            this.yPosition = 0;\n\t            this.width = 0;\n\t            this.height = 0;\n\t        }\n\t        /**\n\t         * Renders the sprite in the given context\n\t         */\n\t        Sprite.prototype.render = function () {\n\t            var _a = this, xOrigin = _a.xOrigin, yOrigin = _a.yOrigin, xPosition = _a.xPosition, yPosition = _a.yPosition, width = _a.width, height = _a.height;\n\t            var sX = constants_1.IS_HIDPI ? xOrigin * 2 : xOrigin;\n\t            var sY = constants_1.IS_HIDPI ? yOrigin * 2 : yOrigin;\n\t            var sWidth = constants_1.IS_HIDPI ? width * 2 : width;\n\t            var sHeight = constants_1.IS_HIDPI ? height * 2 : height;\n\t            this.context.drawImage(this.img, sX, sY, sWidth, sHeight, xPosition, yPosition, width, height);\n\t            return this;\n\t        };\n\t        return Sprite;\n\t    }());\n\t    exports.Sprite = Sprite;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ },\n/* 11 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports) {\n\t    \"use strict\";\n\t    /**\n\t     * Game gravity\n\t     */\n\t    exports.GRAVITY = 0.4;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ },\n/* 12 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var __extends = (this && this.__extends) || function (d, b) {\n\t    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n\t    function __() { this.constructor = d; }\n\t    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t};\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(5)], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, Rect_1) {\n\t    \"use strict\";\n\t    var Bullet = (function (_super) {\n\t        __extends(Bullet, _super);\n\t        function Bullet(context) {\n\t            var _this = _super.call(this, context) || this;\n\t            _this.context = context;\n\t            _this.xSpeed = 12;\n\t            _this.remove = false;\n\t            _this.fillStyle = 'white';\n\t            _this._isMovingLeft = false;\n\t            _this._isMovingRight = false;\n\t            _this._firstUpdate = true;\n\t            _this.width = 8;\n\t            _this.height = 8;\n\t            return _this;\n\t        }\n\t        Object.defineProperty(Bullet.prototype, \"isMovingLeft\", {\n\t            get: function () { return this._isMovingLeft; },\n\t            enumerable: true,\n\t            configurable: true\n\t        });\n\t        Object.defineProperty(Bullet.prototype, \"isMovingRight\", {\n\t            get: function () { return this._isMovingRight; },\n\t            enumerable: true,\n\t            configurable: true\n\t        });\n\t        Bullet.prototype.move = function (action) {\n\t            this._isMovingLeft = action === 'left';\n\t            this._isMovingRight = action === 'right';\n\t            return this;\n\t        };\n\t        Bullet.prototype.stopMove = function (action, sharp) {\n\t            if (sharp === void 0) { sharp = false; }\n\t            this._isMovingRight = !action || action === 'right' ? false : this._isMovingRight;\n\t            this._isMovingLeft = !action || action === 'left' ? false : this._isMovingLeft;\n\t            return this;\n\t        };\n\t        Bullet.prototype.update = function () {\n\t            if (this._firstUpdate) {\n\t                this._firstUpdate = false;\n\t            }\n\t            else {\n\t                this.x += this._isMovingRight ? this.xSpeed : -this.xSpeed;\n\t            }\n\t            return this;\n\t        };\n\t        Bullet.prototype.collisionHandler = function (side, depth) {\n\t            if (side === 'left') {\n\t                this.x += depth;\n\t            }\n\t            if (side === 'right') {\n\t                this.x -= depth;\n\t            }\n\t            this.remove = true;\n\t            return this;\n\t        };\n\t        Bullet.prototype.render = function () {\n\t            var context = this.context;\n\t            context.fillStyle = this.fillStyle;\n\t            _super.prototype.render.call(this);\n\t            context.fill();\n\t            return this;\n\t        };\n\t        return Bullet;\n\t    }(Rect_1.Rect));\n\t    exports.Bullet = Bullet;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ },\n/* 13 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports], __WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports) {\n\t    \"use strict\";\n\t    var Stage = (function () {\n\t        function Stage(context) {\n\t            this.context = context;\n\t            this.y = 0;\n\t            this.outerWidth = 0;\n\t            this.outerHeight = 0;\n\t            this.innerWidth = 0;\n\t            this.innerHeight = 0;\n\t            this.xTranslateStart = 0;\n\t            this.xTranslateEnd = 0;\n\t            this._x = 0;\n\t        }\n\t        Object.defineProperty(Stage.prototype, \"x\", {\n\t            get: function () {\n\t                return this._x;\n\t            },\n\t            set: function (val) {\n\t                var _a = this, xTranslateStart = _a.xTranslateStart, xTranslateEnd = _a.xTranslateEnd, outerWidth = _a.outerWidth, innerWidth = _a.innerWidth;\n\t                if (val > xTranslateStart) {\n\t                    if (val > xTranslateEnd) {\n\t                        this._x = outerWidth - innerWidth;\n\t                    }\n\t                    else {\n\t                        this._x = xTranslateStart - val;\n\t                    }\n\t                }\n\t                else {\n\t                    this._x = 0;\n\t                }\n\t            },\n\t            enumerable: true,\n\t            configurable: true\n\t        });\n\t        Stage.prototype.render = function () {\n\t            var context = this.context;\n\t            context.setTransform(1, 0, 0, 1, 0, 0);\n\t            context.translate(this.x, 0);\n\t            return this;\n\t        };\n\t        return Stage;\n\t    }());\n\t    exports.Stage = Stage;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }\n/******/ ]);\n\n\n// WEBPACK FOOTER //\n// app.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 39da762972ce1737ed82","import { Platformer } from './game/Platformer';\n\nlet canvas = <HTMLCanvasElement>document.getElementById('js-stage');\n\n// Init game\nnew Platformer({\n    elem: canvas,\n    ctx: canvas.getContext('2d'),\n    width: 512,\n    height: 288\n});\n\n\n\n// WEBPACK FOOTER //\n// ./app/scripts/app.ts","import { Rect } from '../utils/canvas/Rect';\nimport { checkForCollision } from './utils/checkForCollision';\nimport { getObstacleArr } from './utils/getObstacleArr';\nimport { getAntagonistArr } from './utils/getAntagonistArr';\nimport { Stage } from './Stage';\nimport { Character } from './Character';\nimport { Antagonist } from './Antagonist';\nimport { Bullet } from './Bullet';\nimport { Obstacle } from './Obstacle';\n\ninterface Canvas {\n    elem: HTMLCanvasElement;\n    ctx: CanvasRenderingContext2D;\n    width: number;\n    height: number;\n}\n\nexport class Platformer {\n\n    private stage: Stage;\n    private protagonist: Character;\n    private antagonistArr: Antagonist[];\n    private obstacleArr: Obstacle[];\n\n    private isJumpKeyPressed: boolean;\n    private isShootKeyPressed: boolean;\n\n    private _endLoop: boolean;\n    private _endLoopCount: number;\n\n    constructor(public canvas: Canvas) {\n\n        canvas.elem.width = canvas.width;\n        canvas.elem.height = canvas.height;\n\n        this.stage = new Stage(canvas.ctx);\n        this.stage.outerWidth = canvas.width;\n        this.stage.outerHeight = canvas.height;\n        this.stage.innerWidth = canvas.width * 4;\n        this.stage.innerHeight = canvas.height;\n        this.stage.xTranslateStart = canvas.width / 2;\n        this.stage.xTranslateEnd = this.stage.innerWidth - (canvas.width / 2);\n\n        this.protagonist = new Character(canvas.ctx);\n        this.protagonist.x = 16;\n        this.protagonist.y = (this.stage.innerHeight / 2) - this.protagonist.height;\n\n        this.isJumpKeyPressed = false;\n        this.isShootKeyPressed = false;\n\n        this._endLoop = false;\n        this._endLoopCount = 0;\n\n        this.obstacleArr = getObstacleArr(canvas.ctx, this.stage.innerWidth, this.stage.innerHeight);\n        this.antagonistArr = getAntagonistArr(canvas.ctx, this.stage.innerWidth, this.stage.innerHeight);\n\n        this\n            .bind()\n            .update();\n    }\n\n    private bind(): this {\n\n        document.addEventListener('keydown', e => {\n            this.onkeydown(e);\n        }, false);\n\n        document.addEventListener('keyup', e => {\n            this.onkeyup(e);\n        }, false);\n\n        return this;\n    }\n\n    private onkeydown(e: KeyboardEvent) {\n\n        let { protagonist } = this;\n        let keyCode = e.keyCode\n\n        if (keyCode === 39) {\n            protagonist.move('right');\n        }\n        if (keyCode === 37) {\n            protagonist.move('left');\n        }\n        if (keyCode === 38 || keyCode === 32) {\n            // Prevent continuous jumping\n            if (!this.isJumpKeyPressed) {\n                protagonist.jump();\n                this.isJumpKeyPressed = true;\n            }\n        }\n        if (keyCode === 90) {\n            // Prevent continuous shooting\n            if (!this.isShootKeyPressed) {\n                protagonist.shoot();\n                this.isShootKeyPressed = true;\n            }\n        }\n    }\n\n    private onkeyup(e: KeyboardEvent) {\n\n        let { protagonist } = this;\n        let keyCode = e.keyCode\n\n        if (keyCode === 39) {\n            protagonist.stopMove('right');\n        }\n        if (keyCode === 37) {\n            protagonist.stopMove('left');\n        }\n        if (keyCode === 38 || keyCode === 32) {\n            this.isJumpKeyPressed = false;\n        }\n        if (keyCode === 90) {\n            this.isShootKeyPressed = false;\n        }\n    }\n\n    /** Draws protagonist, antagonists and obstacles */\n    private update(): this {\n\n        let { canvas, stage, protagonist, antagonistArr, obstacleArr } = this;\n\n        // Clear stage visible area\n        canvas.ctx.clearRect(-stage.x, stage.y, stage.outerWidth, stage.outerHeight);\n\n        // Update protagonist and its bullets\n        protagonist.update();\n        protagonist.bulletArr.forEach(bullet => { bullet.update() });\n        protagonist.bulletArr.forEach((bullet, i) => {\n\n            this\n                .cleanBulletArr(protagonist.bulletArr, i, bullet)\n                .checkForShotCharacter(bullet, antagonistArr)\n                .checkForBulletCollision(bullet, obstacleArr);\n        });\n\n        // Update antagonist and its bullets\n        antagonistArr.forEach(antagonist => {\n            antagonist.update();\n            antagonist.bulletArr.forEach(bullet => { bullet.update() });\n            antagonist.bulletArr.forEach((bullet, i) => {\n                this\n                    .cleanBulletArr(antagonist.bulletArr, i, bullet)\n                    .checkForShotCharacter(bullet, [protagonist])\n                    .checkForBulletCollision(bullet, obstacleArr);\n            });\n        });\n\n        // Check if characters has collide with obstacles or if character had\n        // collide with each other\n        obstacleArr.forEach(obstacle => {\n\n            // Invisible obstacles don't affect protagonist\n            if (!obstacle.isInvisible) {\n                let protagonistCollision = checkForCollision(protagonist, obstacle, true);\n                if (typeof protagonistCollision === 'object') {\n                    protagonist.collisionHandler(\n                        protagonistCollision.side,\n                        protagonistCollision.depth);\n\n                    if (obstacle.canKill) {\n                        protagonist.kill();\n                    }\n                }\n            }\n\n            antagonistArr.forEach(antagonist => {\n\n                let antagonistCollison = checkForCollision(antagonist, obstacle, true);\n                if (typeof antagonistCollison === 'object') {\n                    antagonist.collisionHandler(\n                        antagonistCollison.side,\n                        antagonistCollison.depth);\n                }\n\n                if (!antagonist.isDeath) {\n                    let mortalCollision = checkForCollision(protagonist, antagonist);\n                    if (mortalCollision) {\n                        protagonist.kill();\n                        antagonist.kill();\n                    }\n                }\n            });\n\n            obstacle.render();\n        });\n\n        // Render antagonist and its bullets\n        antagonistArr.forEach(antagonist => {\n            antagonist.bulletArr.forEach(bullet => { bullet.render(); });\n            antagonist.render();\n        });\n\n        // Render protagonist and its bullets\n        protagonist.bulletArr.forEach(bullet => { bullet.render(); });\n        protagonist.render();\n\n        // Move stage along with protagonist\n        stage.x = protagonist.x;\n        stage.render();\n\n        // End game validation\n        if (this._endLoop) {\n            if (this._endLoopCount === protagonist.clearWait - 2) {\n                // Reload website\n                location.reload();\n                // Avoid rendering\n                return this;\n            }\n            this._endLoopCount++;\n        }\n\n        // Restart game if protagonist is death or very close to the end\n        if (protagonist.isDeath || this.protagonist.x > (stage.innerWidth - protagonist.width - 10)) {\n            this._endLoop = true;\n        }\n\n        // Keep updating if everything is ok\n        requestAnimationFrame(this.update.bind(this));\n\n        return this;\n    }\n\n    /** Cleans bullets that are out of sight */\n    private cleanBulletArr(bulletArr: Bullet[], index: number, bullet: Bullet): this {\n\n        let { stage } = this;\n\n        // Check if is out of sight\n        if (bullet.remove || (bullet.x < -stage.x || bullet.x > -stage.x + stage.outerWidth)) {\n            // Remove from array\n            bulletArr.splice(index, 1);\n        }\n\n        return this;\n    }\n\n    /** Checks if a bullet has collided with a Character */\n    private checkForShotCharacter(bullet: Bullet, characterArr: Character[]): this {\n\n        characterArr.forEach(character => {\n\n            if (!character.isDeath) {\n                this.checkForBulletCollision(bullet, [character], (character: Character) => {\n                    character.kill();\n                });\n            }\n        })\n\n        return this;\n    }\n\n    /** Checks if a bullet has collided with another Rect */\n    private checkForBulletCollision(bullet: Bullet, targetArr: Rect[], handler?: (rect: Rect) => void): this {\n\n        targetArr.forEach(target => {\n\n            let collision = checkForCollision(bullet, target, true);\n\n            // Invisible obstacles don't affect bullets\n            if (target['isInvisible']) return;\n\n            if (typeof collision === 'object') {\n                bullet.collisionHandler(collision.side, collision.depth);\n\n                if (typeof handler === 'function') {\n                    handler(target);\n                }\n            }\n        });\n\n        return this;\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./app/scripts/game/Platformer.ts","import { Rect } from '../../utils/canvas/Rect';\n\nexport interface Collision {\n    side: xyDirections;\n    depth: number;\n}\n\n/**\n * Checks for collision between rects\n * @see { @link http://bit.ly/2iR5hvL }\n * @see { @link http://bit.ly/2ijiL26 }\n * @see { @link https://mzl.la/2iyMrWV }\n */\nexport function checkForCollision(rectA: Rect, rectB: Rect, deep = false): boolean | Collision {\n\n    // Distance between centers in x and y axis\n    let xDist = (rectA.x + rectA.width / 2) - (rectB.x + rectB.width / 2);\n    let yDist = (rectA.y + rectA.height / 2) - (rectB.y + rectB.height / 2);\n\n    // Width and height halfs sum of each rect (is the distance between centers\n    // if the rects were side by side and aligned vertically or horizontally).\n    let xHalfs = (rectA.width + rectB.width) / 2;\n    let yHalfs = (rectA.height + rectB.height) / 2;\n\n    // If the distance between centers is less than the halfs in each axis then\n    // rects are colliding.\n    if (Math.abs(xDist) < xHalfs && Math.abs(yDist) < yHalfs) {\n        if (deep) {\n            const xDepth = xHalfs - Math.abs(xDist);\n            const yDepth = yHalfs - Math.abs(yDist);\n\n            if (xDepth >= yDepth) {\n                return {\n                    side: yDist > 0 ? 'top' : 'bottom',\n                    depth: yDepth\n                }\n            }\n            else {\n                return {\n                    side: xDist > 0 ? 'left' : 'right',\n                    depth: xDepth\n                }\n            }\n        }\n        else {\n            return true;\n        }\n    }\n\n    return false;\n}\n\n\n// WEBPACK FOOTER //\n// ./app/scripts/game/utils/checkForCollision.ts","import { Obstacle } from '../Obstacle';\n\nfunction getBlock(ctx: CanvasRenderingContext2D, width = 1, height = 1): Obstacle {\n\n    let block = new Obstacle(ctx);\n    block.width = 32 * width;\n    block.height = 32 * height;\n    return block;\n}\n\nfunction getInvisibleBlock(ctx: CanvasRenderingContext2D, width = 1, height = 1): Obstacle {\n\n    let block = getBlock(ctx, width, height);\n    block.isInvisible = true;\n\n    return block;\n}\n\nfunction getLava(ctx: CanvasRenderingContext2D, width = 1, height = 1): Obstacle {\n\n    let block = new Obstacle(ctx);\n    block.canKill = true;\n    block.width = 32 * width;\n    block.height = 16 * height;\n    block.fillStyle = '#ff4a4a';\n    return block;\n}\n\nexport function getObstacleArr(ctx: CanvasRenderingContext2D, width, height): Obstacle[] {\n\n    let obstacleArr: Obstacle[] = [];\n\n    // LIMITS\n    ////////////////////////////////////////////////////////////////////////////\n    let rightLimit = new Obstacle(ctx);\n    rightLimit.width = 20;\n    rightLimit.height = height;\n    rightLimit.x = width;\n    rightLimit.y = 0;\n    obstacleArr.push(rightLimit);\n\n    let leftLimit = new Obstacle(ctx);\n    leftLimit.width = 20;\n    leftLimit.height = height;\n    leftLimit.x = 0 - 20;\n    leftLimit.y = 0;\n    obstacleArr.push(leftLimit);\n\n    // PART 1\n    ////////////////////////////////////////////////////////////////////////////\n    let p1Floor = getBlock(ctx, 7);\n    p1Floor.x = 0;\n    p1Floor.y = height - p1Floor.height;\n    obstacleArr.push(p1Floor);\n\n    let p1FloorRightLimit = getInvisibleBlock(ctx, 1, 1);\n    p1FloorRightLimit.x = p1Floor.x + p1Floor.width;\n    p1FloorRightLimit.y = p1Floor.y - p1FloorRightLimit.height;\n    obstacleArr.push(p1FloorRightLimit);\n\n    let p1ProtagonistGuard = getInvisibleBlock(ctx, 1, 1);\n    p1ProtagonistGuard.x = p1ProtagonistGuard.width;\n    p1ProtagonistGuard.y = p1FloorRightLimit.y;\n    obstacleArr.push(p1ProtagonistGuard);\n\n    let p1Lava = getLava(ctx, 11, 1);\n    p1Lava.x = p1Floor.x + p1Floor.width;\n    p1Lava.y = height - p1Lava.height;\n    obstacleArr.push(p1Lava);\n\n    let p1StepsCount = 0;\n    while (p1StepsCount < 5) {\n        let p1Step = getBlock(ctx);\n        p1Step.y = height;\n        p1Step.y -= p1StepsCount % 2 ? p1Step.height * 2 : p1Step.height * 3;\n        p1Step.x = (p1Floor.x + p1Floor.width) + p1Step.width;\n        p1Step.x += (p1Step.width * 2) * p1StepsCount;\n        obstacleArr.push(p1Step);\n        ++p1StepsCount;\n    }\n\n    // PART 2\n    ////////////////////////////////////////////////////////////////////////////\n    let p2LeftLimit = getBlock(ctx, 1, 2);\n    p2LeftLimit.x = p1Lava.x + p1Lava.width;\n    p2LeftLimit.y = height - p2LeftLimit.height;\n    obstacleArr.push(p2LeftLimit);\n\n    let p2Floor = getBlock(ctx, 9);\n    p2Floor.x = p2LeftLimit.x + p2LeftLimit.width;\n    p2Floor.y = height - p2Floor.height;\n    obstacleArr.push(p2Floor);\n\n    let p2RightLimit = getBlock(ctx, 1, 3);\n    p2RightLimit.x = p2Floor.x + p2Floor.width;\n    p2RightLimit.y = height - p2RightLimit.height;\n    obstacleArr.push(p2RightLimit);\n\n    let p2FloatBlock = getBlock(ctx, 7);\n    p2FloatBlock.x = p2LeftLimit.x + p2LeftLimit.width;\n    p2FloatBlock.y = height - (p2FloatBlock.height * 5);\n    obstacleArr.push(p2FloatBlock);\n\n    let p2FloatBlockLeftLimit = getInvisibleBlock(ctx, 1);\n    p2FloatBlockLeftLimit.x = p2FloatBlock.x - p2FloatBlockLeftLimit.height;\n    p2FloatBlockLeftLimit.y = p2FloatBlock.y - p2FloatBlockLeftLimit.width;\n    obstacleArr.push(p2FloatBlockLeftLimit);\n\n    let p2FloatBlockRightLimit = getInvisibleBlock(ctx, 1);\n    p2FloatBlockRightLimit.x = p2FloatBlock.x + p2FloatBlock.width;\n    p2FloatBlockRightLimit.y = p2FloatBlock.y - p2FloatBlockRightLimit.width;\n    obstacleArr.push(p2FloatBlockRightLimit);\n\n    // PART 3\n    ////////////////////////////////////////////////////////////////////////////\n    let p3Floor = getLava(ctx, 8);\n    p3Floor.x = p2RightLimit.x + p2RightLimit.width;\n    p3Floor.y = height + (p3Floor.height * 2);\n    obstacleArr.push(p3Floor);\n\n    let p3StepLeft = getBlock(ctx);\n    p3StepLeft.x = p3Floor.x + (p3StepLeft.width * 2);\n    p3StepLeft.y = height - (p3StepLeft.height * 2);\n    obstacleArr.push(p3StepLeft);\n\n    let p3StepRight = getBlock(ctx);\n    p3StepRight.x = p3Floor.x + (p3StepLeft.width * 5);\n    p3StepRight.y = p3StepLeft.y;\n    obstacleArr.push(p3StepRight);\n\n    // PART 4\n    ////////////////////////////////////////////////////////////////////////////\n    let p4LeftLimit = getBlock(ctx, 1, 3);\n    p4LeftLimit.x = p3Floor.x + p3Floor.width;\n    p4LeftLimit.y = height - p4LeftLimit.height;\n    obstacleArr.push(p4LeftLimit);\n\n    let p4Floor = getBlock(ctx, 10);\n    p4Floor.x = p4LeftLimit.x + p4LeftLimit.width;\n    p4Floor.y = height - p4Floor.height;\n    obstacleArr.push(p4Floor);\n\n    let p4FloorRightLimit = getInvisibleBlock(ctx, 1, 3);\n    p4FloorRightLimit.x = p4Floor.x + p4Floor.width;\n    p4FloorRightLimit.y = height - (p4FloorRightLimit.height);\n    obstacleArr.push(p4FloorRightLimit);\n\n    let p4Lava = getLava(ctx, 9);\n    p4Lava.x = p4FloorRightLimit.x;\n    p4Lava.y = height - p4Lava.height;\n    obstacleArr.push(p4Lava);\n\n    let p4Step = getBlock(ctx);\n    p4Step.x = p4FloorRightLimit.x + (p4Step.width * 4);\n    p4Step.y = height - p4Step.height;\n    obstacleArr.push(p4Step);\n\n    // PART 5\n    ////////////////////////////////////////////////////////////////////////////\n    let p5StepCount = 0;\n    while (p5StepCount < 7) { \n        let p5StepHeight = p5StepCount < 5 ? p5StepCount + 1 : 5;\n        let p5Step = getBlock(ctx, 1, p5StepHeight);\n        p5Step.x = (p4Lava.x + p4Lava.width) + (p5Step.width * p5StepCount);\n        p5Step.y = height - p5Step.height;\n        obstacleArr.push(p5Step);\n        ++p5StepCount;\n    }\n\n    return obstacleArr;\n}\n\n\n// WEBPACK FOOTER //\n// ./app/scripts/game/utils/getObstacleArr.ts","import { Rect } from '../utils/canvas/Rect';\n\nexport class Obstacle extends Rect {\n\n    canKill = false;\n    isInvisible = false;\n    fillStyle: CanvasFillStyle = 'black';\n\n    constructor(public context: CanvasRenderingContext2D) {\n        super(context);\n        this.fillStyle = 'black';\n    }\n\n    render(): this {\n\n        let { context, isInvisible } = this;\n\n        context.fillStyle = isInvisible ? 'transparent' : this.fillStyle;\n        super.render();\n        context.fill();\n\n        return this;\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./app/scripts/game/Obstacle.ts","export class Rect {\n\n    x: number;\n    y: number;\n    width: number;\n    height: number;\n\n    constructor(public context: CanvasRenderingContext2D) {\n        this.x = 0;\n        this.y = 0;\n        this.width = 0;\n        this.height = 0;\n    }\n\n    render() {\n\n        let { context } = this;\n\n        context.beginPath();\n        context.rect(\n            this.x,\n            this.y,\n            this.width,\n            this.height)\n\n        return this;\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./app/scripts/utils/canvas/Rect.ts","import { Antagonist } from '../Antagonist';\n\nexport function getAntagonistArr(ctx: CanvasRenderingContext2D, width: number, height: number) {\n\n    let antagonitsArr: Antagonist[] = [];\n\n    let p1Antagonist = new Antagonist(ctx);\n    p1Antagonist.x = 200;\n    p1Antagonist.y = 224;\n    p1Antagonist.lastMove = 'left';\n    p1Antagonist.canMove = true;\n    p1Antagonist.fillStyle = '#ff4a4a';\n    antagonitsArr.push(p1Antagonist);\n\n    let p2AntagonistA = new Antagonist(ctx);\n    p2AntagonistA.x = 608;\n    p2AntagonistA.y = 96;\n    p2AntagonistA.lastMove = 'right';\n    p2AntagonistA.canMove = true;\n    p2AntagonistA.fillStyle = '#ff4a4a';\n    antagonitsArr.push(p2AntagonistA);\n\n    let p2AntagonistB = new Antagonist(ctx);\n    p2AntagonistB.x = 808;\n    p2AntagonistB.y = 96;\n    p2AntagonistB.lastMove = 'left';\n    p2AntagonistB.canMove = true;\n    p2AntagonistB.fillStyle = '#e05353';\n    antagonitsArr.push(p2AntagonistB);\n\n    let p2AntagonistC = new Antagonist(ctx);\n    p2AntagonistC.x = 864;\n    p2AntagonistC.y = 224;\n    p2AntagonistC.lastMove = 'left';\n    p2AntagonistC.canMove = true;\n    p2AntagonistC.canShoot = true;\n    antagonitsArr.push(p2AntagonistC);\n\n    let p4AntagonistC = new Antagonist(ctx);\n    p4AntagonistC.x = 1536;\n    p4AntagonistC.y = 224;\n    p4AntagonistC.lastMove = 'left';\n    p4AntagonistC.canMove = true;\n    p4AntagonistC.canShoot = true;\n    p4AntagonistC.canJump = true;\n    p4AntagonistC.fillStyle = '#44c782';\n    antagonitsArr.push(p4AntagonistC);\n\n    return antagonitsArr;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./app/scripts/game/utils/getAntagonistArr.ts","import { Character } from './Character';\n\nexport class Antagonist extends Character {\n\n    canJump = false;\n    canShoot = false;\n    shootWait = 50;\n    jumpWait = 10;\n\n    protected _canMove = false;\n    protected _shootWaitCount = 0;\n    protected _jumpWaitCount = 0;\n\n    constructor(public context: CanvasRenderingContext2D) {\n\n        super(context);\n\n        // Super defaults override\n        this.ySpeed = 6;\n        this.xSpeed = 0.25;\n        this.fillStyle = '#524f56';\n        this.spriteFrames = {\n            defaultRight: [28, 0],\n            defaultLeft: [28, 16],\n            deathRight: [42, 0],\n            deathLeft: [42, 16]\n        };\n\n        // Defaults\n        this.canJump = false;\n        this.jumpWait = 25;\n        this._jumpWaitCount = 0;\n    }\n\n    set canMove(val: boolean) {\n        this.move(this.lastMove);\n        this._canMove = true;\n    }\n\n    get canMove() {\n        return this._canMove;\n    }\n\n    update(): this {\n\n        if (!this.isDeath) {\n            // Auto jumping\n            if (this.canJump && !this._isJumping) {\n                if (this._jumpWaitCount++ === this.jumpWait) {\n                    this.jump();\n                    this._jumpWaitCount = 0;\n                }\n            }\n\n            // Auto shooting\n            if (this.canShoot) {\n                if (this._shootWaitCount++ === this.shootWait) {\n                    this.shoot();\n                    this._shootWaitCount = 0;\n                }\n            }\n        }\n\n        // Update super\n        super.update();\n\n        return this;\n    }\n\n    collisionHandler(side: xyDirections, depth: number): this {\n\n        super.collisionHandler(side, depth);\n\n        // Keep moving after side collision\n        if (!this._isDeath) {\n            if (side === 'right') this.move('left');\n            if (side === 'left') this.move('right');\n        }\n\n        return this;\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./app/scripts/game/Antagonist.ts","import { IS_HIDPI } from '../utils/constants';\nimport { Rect } from '../utils/canvas/Rect';\nimport { Sprite } from '../utils/canvas/Sprite';\nimport { GRAVITY } from './utils/constants';\nimport { Bullet } from './Bullet';\n\nexport class Character extends Rect {\n\n    friction = 0.75;\n    xSpeed = 4;\n    ySpeed = 8;\n    clearWait = 25;\n    lastMove: xDirections = 'right';\n    fillStyle: CanvasFillStyle = '#5575ff';\n    sprite: Sprite;\n    spriteFrames = {\n        defaultRight: [0, 0],\n        defaultLeft: [0, 16],\n        deathRight: [14, 0],\n        deathLeft: [14, 16]\n    };\n\n    protected _xVel = 0;\n    protected _yVel = 0;\n    protected _isDeath = false;\n    protected _isJumping = false;\n    protected _isMovingLeft = false;\n    protected _isMovingRight = false;\n    protected _clearWaitCount = 0;\n    protected _bulletArr: Bullet[] = [];\n\n    constructor(public context: CanvasRenderingContext2D) {\n\n        super(context);\n\n        this.width = 24;\n        this.height = 32;\n\n        let spriteId = IS_HIDPI ? 'js-sprite-2x' : 'js-sprite-1x';\n        this.sprite = new Sprite(context);\n        this.sprite.img = <HTMLImageElement>document.getElementById(spriteId);\n        this.sprite.width = 14;\n        this.sprite.height = 16;\n    }\n\n    get xVel() { return this._xVel; }\n    get yVel() { return this._yVel; }\n    get isDeath() { return this._isDeath; }\n    get isJumping() { return this._isJumping; }\n    get isMovingLeft() { return this._isMovingLeft; }\n    get isMovingRight() { return this._isMovingRight; }\n    get bulletArr() { return this._bulletArr; }\n    get clearWaitCount() { return this._clearWaitCount; }\n\n    kill(): this {\n\n        // Ends horizontal moving completly\n        this.stopMove();\n        this._xVel = 0;\n\n        // Ends vertical moving completly\n        this._isJumping = false;\n        this._yVel = 0;\n\n        this._isDeath = true;\n\n        return this;\n    }\n\n    move(action: xDirections): this {\n\n        if (!this._isDeath) {\n            this._isMovingLeft = action === 'left';\n            this._isMovingRight = action === 'right';\n            this.lastMove = action;\n        }\n\n        return this;\n    }\n\n    stopMove(action?: xDirections, sharp = false): this {\n\n        // End horizontal moving smoothly\n        this._isMovingRight = !action || action === 'right' ? false : this._isMovingRight;\n        this._isMovingLeft = !action || action === 'left' ? false : this._isMovingLeft;\n\n        return this;\n    }\n\n    jump(): this {\n\n        // Abort if already jumping or not grounded (falling down from a cliff)\n        if (!this._isJumping && this._yVel === 0) {\n            this._isJumping = true;\n            this._yVel -= this.ySpeed;\n        }\n\n        return this;\n    }\n\n    shoot(): this {\n\n        let { context, x, y, width, height } = this;\n\n        let bullet = new Bullet(context);\n        bullet.fillStyle = this.fillStyle;\n        bullet.x = (x + width / 2) - (bullet.width / 2);\n        bullet.y = (y + height / 2) - (bullet.height / 2);\n\n        bullet.move(this.lastMove);\n        this._bulletArr.push(bullet);\n\n        return this;\n    }\n\n    update(): this {\n\n        if (!this._isDeath) {\n\n            // Move right\n            if (this._isMovingRight) {\n                if (this._xVel < this.xSpeed) {\n                    this._xVel++;\n                }\n            }\n            // Move left\n            else if (this._isMovingLeft) {\n                if (this._xVel > -this.xSpeed) {\n                    this._xVel--;\n                }\n            }\n            // Slow down and stop it\n            else if (this._xVel !== 0) {\n                if (Math.abs(this._xVel) < 0.05) {\n                    this._xVel = 0;\n                }\n                else {\n                    this._xVel *= this.friction;\n                }\n            }\n\n            // Gravity must always push down\n            this._yVel += GRAVITY;\n\n            // Make speed || friction affect x\n            this.x += this._xVel;\n\n            // Make gravity affect y\n            this.y += this._yVel;\n        }\n\n        return this;\n    }\n\n    collisionHandler(side: xyDirections, depth: number): this {\n\n        if (!this._isDeath) {\n            switch (side) {\n                case 'left':\n                    this.x += depth;\n                    break;\n                case 'right':\n                    this.x -= depth;\n                    break;\n                case 'top':\n                    this.y += depth;\n                    // Update vertical movement\n                    this._yVel = 0;\n                    break;\n                case 'bottom':\n                    this.y -= depth;\n                    break;\n            }\n\n            // Stop character horizontal movement\n            if (side === 'left' || side === 'right') {\n                this._xVel = 0;\n            }\n\n            // Stop vertical movement if character is moving down\n            if (side === 'bottom' && this._yVel > 0) {\n                this._yVel = 0;\n\n                if (this._isJumping) {\n                    this._isJumping = false;\n                }\n            }\n        }\n\n        return this;\n    }\n\n    render(): this {\n\n        let { context } = this;\n\n        if (this._isDeath) {\n            if (this._clearWaitCount === this.clearWait) {\n                // Avoid rendering\n                return this;\n            }\n            this._clearWaitCount++;\n        }\n\n        context.fillStyle = this.fillStyle;\n        super.render();\n        context.fill();\n\n        this.renderFace();\n\n        return this;\n    }\n\n    renderFace(): this {\n\n        let { sprite, lastMove, spriteFrames } = this;\n\n        sprite.yPosition = this.y;\n        sprite.xPosition = this.x;\n\n        if (lastMove === 'right') {\n            sprite.xPosition += this.width - sprite.width;\n        }\n\n        if (this.isDeath) {\n            if (lastMove === 'right') {\n                sprite.xOrigin = spriteFrames.deathRight[0];\n                sprite.yOrigin = spriteFrames.deathRight[1];\n            }\n            else {\n                sprite.xOrigin = spriteFrames.deathLeft[0];\n                sprite.yOrigin = spriteFrames.deathLeft[1];\n            }\n        }\n        else {\n            if (lastMove === 'right') {\n                sprite.xOrigin = spriteFrames.defaultRight[0];\n                sprite.yOrigin = spriteFrames.defaultRight[1];\n            }\n            else {\n                sprite.xOrigin = spriteFrames.defaultLeft[0];\n                sprite.yOrigin = spriteFrames.defaultLeft[1];\n            }\n        }\n\n        sprite.render();\n\n        return this;\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./app/scripts/game/Character.ts","/**\n * Is high resolution device\n * @const\n */\nexport const IS_HIDPI = window.devicePixelRatio > 1;\n\n\n\n// WEBPACK FOOTER //\n// ./app/scripts/utils/constants.ts","import { IS_HIDPI } from '../constants';\n\nexport class Sprite {\n\n    img: HTMLImageElement;\n    xOrigin = 0;\n    yOrigin = 0;\n    xPosition = 0;\n    yPosition = 0;\n    width = 0;\n    height = 0;\n\n    /**\n     * Interface that renders and updates a single sprite\n     */\n    constructor(public context: CanvasRenderingContext2D) {\n    }\n\n    /**\n     * Renders the sprite in the given context\n     */\n    public render(): this {\n\n        let { xOrigin, yOrigin, xPosition, yPosition, width, height } = this;\n\n        let sX = IS_HIDPI ? xOrigin * 2 : xOrigin;\n        let sY = IS_HIDPI ? yOrigin * 2 : yOrigin;\n        let sWidth = IS_HIDPI ? width * 2 : width;\n        let sHeight = IS_HIDPI ? height * 2 : height;\n\n        this.context.drawImage(this.img,\n            sX, sY,\n            sWidth, sHeight,\n            xPosition, yPosition,\n            width, height);\n\n        return this;\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./app/scripts/utils/canvas/Sprite.ts","/**\n * Game gravity\n */\nexport const GRAVITY = 0.4;\n\n\n\n// WEBPACK FOOTER //\n// ./app/scripts/game/utils/constants.ts","import { Rect } from '../utils/canvas/Rect';\n\nexport class Bullet extends Rect {\n\n    xSpeed = 12;\n    remove = false;\n    fillStyle: CanvasFillStyle = 'white';\n\n    protected _isMovingLeft = false;\n    protected _isMovingRight = false;\n    protected _firstUpdate = true;\n\n    constructor(public context: CanvasRenderingContext2D) {\n\n        super(context);\n\n        this.width = 8;\n        this.height = 8;\n    }\n\n    get isMovingLeft() { return this._isMovingLeft; }\n    get isMovingRight() { return this._isMovingRight; }\n\n    move(action: xDirections): this {\n\n        this._isMovingLeft = action === 'left';\n        this._isMovingRight = action === 'right';\n\n        return this;\n    }\n\n    stopMove(action?: xDirections, sharp = false): this {\n\n        this._isMovingRight = !action || action === 'right' ? false : this._isMovingRight;\n        this._isMovingLeft = !action || action === 'left' ? false : this._isMovingLeft;\n\n        return this;\n    }\n\n    update(): this {\n\n        if (this._firstUpdate) {\n            this._firstUpdate = false;\n        }\n        else {\n            this.x += this._isMovingRight ? this.xSpeed : -this.xSpeed;\n        }\n\n        return this;\n    }\n\n    collisionHandler(side: xyDirections, depth: number): this {\n\n        if (side === 'left') {\n            this.x += depth;\n        }\n        if (side === 'right') {\n            this.x -= depth;\n        }\n\n        this.remove = true;\n        return this;\n    }\n\n    render(): this {\n\n        let { context } = this;\n\n        context.fillStyle = this.fillStyle;\n        super.render();\n        context.fill();\n\n        return this;\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./app/scripts/game/Bullet.ts","export class Stage {\n\n    y = 0;\n    outerWidth = 0;\n    outerHeight = 0;\n    innerWidth = 0;\n    innerHeight = 0;\n    xTranslateStart = 0;\n    xTranslateEnd = 0;\n\n    protected _x = 0;\n\n    constructor(public context: CanvasRenderingContext2D) {}\n\n    set x (val: number) {\n\n        let { xTranslateStart, xTranslateEnd, outerWidth, innerWidth } = this;\n\n        if (val > xTranslateStart) {\n            if (val > xTranslateEnd) {\n                this._x = outerWidth - innerWidth;\n            }\n            else {\n                this._x = xTranslateStart - val;\n            }\n        }\n        else {\n            this._x = 0;\n        }\n    }\n\n    get x () {\n        return this._x;\n    }\n\n    render(): this {\n\n        let { context } = this;\n\n        context.setTransform(1, 0, 0, 1, 0, 0);\n        context.translate(this.x, 0);\n\n        return this;\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./app/scripts/game/Stage.ts"],"sourceRoot":""}